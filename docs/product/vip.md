# 高级版

高级版涵盖了[标准版](./free.md)的所有功能，同时通过授权高级版可以实现以下功能：

已支持：    
- 可自定义 logo（编辑器左上角 logo 的图片地址、链接地址及是否可见）
- 可自定义品牌（加载界面 logo 及标题，关于界面的信息）
- 可使用连接器及 Automation API（大量二开场景 API，可以轻松和自己的业务系统结合实现高级功能）
- Websocket 支持强制降级为长轮询（在网关不允许长连接的情况下，非常有用）

进行中：    
- 浮水印（截图留痕，防止资料外泄）    

需求池：    
- 剪切板区分内部外部（可禁止粘贴到外部，防止资料外泄）    

高级版更多功能不断加入中，敬请期待。如果你有一些通用业务需求，也可以向作者提出建议，评估是否可以添加。

## 获取镜像


具体步骤见 [安装部署](../install/docker.md)。

## 启动容器

具体参数见 [安装部署](../install/docker.md)，其中高级版需要的参数及挂载的目录务必正确传递，否则会授权失败。

## 查询机器码

容器启动完毕后，访问 http://ip:9000 进入欢迎界面，在 `example` 新建任意文档，打开后在浏览器网络面板会看到 `/getConfig` 接口请求，查看其中的返回体，找到 `machineCode` 字段，即为当前环境的机器码。

![查询机器码](/images/machineCode.png)

可多次重启或重建容器验证机器码是否变化，如果发生变化请勿继续授权，请按以下方式检查：

1. 容器启动信息中三个高级版授权必须挂载的目录是否正常挂载
2. 特权模式参数 `--privileged` 是否正确传递

如以上步骤都正确配置但问题依然存在，请联系作者将部署环境及方式告知，寻找解决办法。

## 获得 license 文件

获取授权需提供以下信息：

- 机器码（上一步查询获得的机器码）
- 授权功能点（自定义 logo、自定义品牌、连接器、Websocket 降级，每项费用不同，功能点可叠加。功能不断增加中，具体以商品详情页为准。）
- 开始时间（默认为当天的 0 点）
- 授权时长（天数，具体时间为到期日后一天的 0 点）

## 上传 license 文件

上传获得的 `license.lic` 文件至 `/var/www/onlyoffice/Data` 的挂载目录，此时容器内会自动加载文件。如果不生效可重启一次容器。

## 查看 license 信息

访问 `http://ip:9090/info` ，如果授权成功，即可看到授权的起止日期等信息。

![license 授权结果](/images/license.png)
